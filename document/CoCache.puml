@startuml

!include layout.puml

title
CoCache
__Sequence Diagram__
end title

actor User
participant CoherentCache
participant ClientSideCache
participant DistributedCache
queue InvalidateBus

CoherentCache++
InvalidateBus++
CoherentCache -> InvalidateBus : subscribe
User -> CoherentCache : get(key)
CoherentCache -> ClientSideCache++ : get(key)
alt cache exist
CoherentCache <-- ClientSideCache : cache
else cache not exist
CoherentCache -> DistributedCache++ : get(key)
end

User <-- CoherentCache : cache
@enduml
